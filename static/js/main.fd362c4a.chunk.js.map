{"version":3,"sources":["Components/Searchbar/Searchbar.module.css","Components/ImageGalleryItem/ImageGalleryItem.module.css","Components/Modal/Modal.module.css","Components/Button/Button.module.css","Components/Loader/Loader.module.css","Components/ImageGallery/ImageGallery.module.css","Service/apiService.js","Service/apiStatus.js","Components/Searchbar/Searchbar.js","Components/ImageGalleryItem/ImageGalleryItem.js","Components/Modal/Modal.js","Components/Button/Button.js","Components/Loader/Loader.js","Components/ImageGallery/ImageGallery.js","App.js","index.js"],"names":["module","exports","fetchPhoto","queryString","numberPage","str","encodeURIComponent","url","fetch","then","response","ok","json","Promise","reject","Error","STATUS","PENDING","RESOLVED","REJECTED","Searchbar","onSubmit","useState","value","setValue","className","s","SearchForm","event","preventDefault","toast","error","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","type","SearchForm_button","SearchForm_button_label","SearchForm_input","autoComplete","autoFocus","placeholder","onChange","target","trim","ImageGalleryItem","images","onClickImage","map","el","src","webformatURL","alt","tags","ImageGalleryItem_image","data-big_img","largeImageURL","onClick","id","modalRoot","document","querySelector","Modal","onClose","children","useEffect","handleKeyDown","e","code","window","addEventListener","removeEventListener","createPortal","Overlay","currentTarget","Button","container","Loader","color","bigImage","ImageGallery","status","showModal","setShowModal","toggleModal","prevShowModal","message","dataset","big_img","App","setError","setStatus","page","setPage","setQueryString","setImages","data","arrayImages","hits","length","forEach","element","push","prevImages","scrollTo","top","documentElement","scrollHeight","behavior","catch","values","prevPage","ReactDOM","render","StrictMode","getElementById"],"mappings":"yIACAA,EAAOC,QAAU,CAAC,UAAY,6BAA6B,WAAa,8BAA8B,kBAAoB,qCAAqC,wBAA0B,2CAA2C,iBAAmB,sC,qBCAvPD,EAAOC,QAAU,CAAC,iBAAmB,2CAA2C,uBAAyB,mD,gBCAzGD,EAAOC,QAAU,CAAC,QAAU,uBAAuB,MAAQ,uB,gBCA3DD,EAAOC,QAAU,CAAC,OAAS,uBAAuB,UAAY,4B,kBCA9DD,EAAOC,QAAU,CAAC,UAAY,4B,iBCA9BD,EAAOC,QAAU,CAAC,aAAe,qC,oKCgBlBC,MAbf,SAAoBC,EAAaC,GAC/B,IAAMC,EAAMC,mBAAmBH,GAC3BI,EAAG,uCANO,qCAMP,cAAgDF,EAAhD,kCAA6ED,EAA7E,qBALc,GAKd,wBAJW,cAMlB,OAAOI,MAAMD,GAAKE,MAAK,SAAAC,GACrB,OAAIA,EAASC,GACJD,EAASE,OAGXC,QAAQC,OAAO,IAAIC,MAAJ,yICPXC,EANA,CACbC,QAAS,UACTC,SAAU,WACVC,SAAU,Y,wBCsDGC,MApDf,YAAkC,IAAbC,EAAY,EAAZA,SAAY,EACLC,mBAAS,IADJ,mBACxBC,EADwB,KACjBC,EADiB,KA2B/B,OACE,wBAAQC,UAAWC,IAAEN,UAArB,SACE,uBAAMK,UAAWC,IAAEC,WAAYN,SAtBd,SAAAO,GACnBA,EAAMC,iBAEQ,KAAVN,GAaJF,EAASE,GACTC,EAAS,KAbPM,IAAMC,MAAM,8HAA2B,CACrCC,SAAU,YACVC,UAAW,IACXC,iBAAiB,EACjBC,cAAc,EACdC,cAAc,EACdC,WAAW,EACXC,cAAUC,KAWZ,UACE,wBAAQC,KAAK,SAASf,UAAWC,IAAEe,kBAAnC,SACE,sBAAMhB,UAAWC,IAAEgB,wBAAnB,sBAGF,uBACEjB,UAAWC,IAAEiB,iBACbH,KAAK,OACLI,aAAa,MACbC,WAAS,EACTC,YAAY,2BACZC,SArCe,SAAAnB,GACrBJ,EAASI,EAAMoB,OAAOzB,MAAM0B,SAqCtB1B,MAAOA,U,iBCjBF2B,MAzBf,YAAqD,IAAzBC,EAAwB,EAAxBA,OAAQC,EAAgB,EAAhBA,aAClC,OACE,mCACGD,EAAOE,KAAI,SAAAC,GACV,OACE,oBAAI7B,UAAWC,IAAEwB,iBAAjB,SACE,qBACEK,IAAKD,EAAGE,aACRC,IAAKH,EAAGI,KACRjC,UAAWC,IAAEiC,uBACbC,eAAcN,EAAGO,cACjBC,QAASV,KAN2BE,EAAGS,U,iBCH/CC,EAAYC,SAASC,cAAc,eAE1B,SAASC,EAAT,GAAuC,IAAtBC,EAAqB,EAArBA,QAASC,EAAY,EAAZA,SACvCC,qBAAU,WACR,IAAMC,EAAgB,SAAAC,GACL,WAAXA,EAAEC,MACJL,KAMJ,OAFAM,OAAOC,iBAAiB,UAAWJ,GAE5B,WACLG,OAAOE,oBAAoB,UAAWL,MAEvC,CAACH,IAQJ,OAAOS,uBACL,qBAAKpD,UAAWC,IAAEoD,QAAShB,QAPD,SAAAU,GACtBA,EAAExB,SAAWwB,EAAEO,eACjBX,KAKF,SACE,qBAAK3C,UAAWC,IAAEyC,MAAlB,SAA0BE,MAE5BL,G,qBC/BW,SAASgB,EAAT,GAA8B,IAAZlB,EAAW,EAAXA,QAC/B,OACE,qBAAKrC,UAAWC,IAAEuD,UAAlB,SACE,wBAAQzC,KAAK,SAASf,UAAWC,IAAEsD,OAAQlB,QAASA,EAApD,yB,sCCDS,SAASoB,IACtB,OACE,qBAAKzD,UAAWC,IAAEuD,UAAlB,SACE,cAAC,IAAD,CAAiBE,MAAM,c,qBCKvBC,EAAW,CAAE3B,IAAK,GAAIF,IAAK,IA4ClB8B,MA1Cf,YAA2D,IAAnClC,EAAkC,EAAlCA,OAAQmC,EAA0B,EAA1BA,OAAQxB,EAAkB,EAAlBA,QAAS/B,EAAS,EAATA,MAAS,EACtBT,oBAAS,GADa,mBACjDiE,EADiD,KACtCC,EADsC,KAGlDC,EAAc,WAClBD,GAAa,SAAAE,GAAa,OAAKA,MASjC,OAAIJ,IAAWtE,EAAOG,SACb,6BAAKY,EAAM4D,UAIlB,qCACE,oBAAIlE,UAAWC,IAAE2D,aAAjB,SACE,cAAC,EAAD,CAAkBlC,OAAQA,EAAQC,aAbnB,SAAAxB,GACnBwD,EAAS3B,IAAM7B,EAAMoB,OAAOS,IAC5B2B,EAAS7B,IAAM3B,EAAMoB,OAAO4C,QAAQC,QACpCJ,SAaGH,IAAWtE,EAAOE,UAAY,cAAC8D,EAAD,CAAQlB,QAASA,IAE/CwB,IAAWtE,EAAOC,SAAW,cAACiE,EAAD,IAE7BK,GACC,cAACpB,EAAD,CAAOC,QAASqB,EAAhB,SACE,qBAAKlC,IAAK6B,EAAS7B,IAAKE,IAAK2B,EAAS3B,YCoCjCqC,MApEf,WAAgB,IAAD,EACaxE,mBAAS,MADtB,mBACNS,EADM,KACCgE,EADD,OAEezE,mBAAS,IAFxB,mBAENgE,EAFM,KAEEU,EAFF,OAGW1E,mBAAS,GAHpB,mBAGN2E,EAHM,KAGAC,EAHA,OAIyB5E,mBAAS,IAJlC,mBAINnB,EAJM,KAIOgG,EAJP,OAKe7E,mBAAS,IALxB,mBAKN6B,EALM,KAKEiD,EALF,KAsDb,OA/CA9B,qBAAU,WA8BHnE,GAAgB8F,IAGrBD,EAAUhF,EAAOC,SA/Bff,EAgCOC,EAAa8F,GA/BjBxF,MAAK,SAAA4F,GACJ,IAAMC,EAAc,GACpB,OAAyB,IAArBD,EAAKE,KAAKC,OACL3F,QAAQC,OAAO,IAAIC,MAAJ,mJAGxBsF,EAAKE,KAAKE,SAAQ,SAAAC,GAAY,IACpB3C,EAA0C2C,EAA1C3C,GAAIP,EAAsCkD,EAAtClD,aAAcK,EAAwB6C,EAAxB7C,cAAeH,EAASgD,EAAThD,KACzC4C,EAAYK,KAAK,CAAE5C,KAAIP,eAAcK,gBAAeH,YAE/C4C,MAER7F,MAAK,SAAA6F,GACJF,GAAU,SAAAQ,GAAU,4BAAQA,GAAR,YAAuBN,OAC3CN,EAAUhF,EAAOE,UAEjBwD,OAAOmC,SAAS,CACdC,IAAK7C,SAAS8C,gBAAgBC,aAC9BC,SAAU,cAGbC,OAAM,SAAAnF,GACLgE,EAAShE,GACTiE,EAAUhF,EAAOG,gBAStB,CAAChB,EAAa8F,IAaf,sBAAKxE,UAAU,MAAf,UACE,cAAC,EAAD,CAAWJ,SAZE,SAAA8F,GACff,EAAU,IACVF,EAAQ,GACRC,EAAegB,MAUb,cAAC,EAAD,CACE7B,OAAQA,EACRvD,MAAOA,EACP+B,QAVwB,WAC5BoC,GAAQ,SAAAkB,GAAQ,OAAIA,EAAW,MAU3BjE,OAAQA,IAEV,cAAC,IAAD,QCrENkE,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFtD,SAASuD,eAAe,W","file":"static/js/main.fd362c4a.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__2AV7s\",\"SearchForm\":\"Searchbar_SearchForm___ia8g\",\"SearchForm_button\":\"Searchbar_SearchForm_button__1SA4i\",\"SearchForm_button_label\":\"Searchbar_SearchForm_button_label__2xlRk\",\"SearchForm_input\":\"Searchbar_SearchForm_input__1ss_h\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem\":\"ImageGalleryItem_ImageGalleryItem__3xV4O\",\"ImageGalleryItem_image\":\"ImageGalleryItem_ImageGalleryItem_image__buy16\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__1GIgH\",\"Modal\":\"Modal_Modal__3ZlTf\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__c93mN\",\"container\":\"Button_container__2xy75\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Loader_container__Ty8VQ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__2vLvO\"};","const KEY_API = '19471965-37c13a0c7cc27691c95ac1581';\nconst NumberOfPhotos = 12;\nconst orientation = 'horizontal';\n\nfunction fetchPhoto(queryString, numberPage) {\n  const str = encodeURIComponent(queryString);\n  let url = `https://pixabay.com/api/?key=${KEY_API}&q=${str}&image_type=photo&page=${numberPage}&per_page=${NumberOfPhotos}&orientation=${orientation}`;\n\n  return fetch(url).then(response => {\n    if (response.ok) {\n      return response.json();\n    }\n\n    return Promise.reject(new Error(`Ошибка получения данных`));\n  });\n}\n\nexport default fetchPhoto;\n","const STATUS = {\n  PENDING: 'pending',\n  RESOLVED: 'resolved',\n  REJECTED: 'rejected',\n};\n\nexport default STATUS;\n","import { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { toast } from 'react-toastify';\nimport s from './Searchbar.module.css';\n\nfunction Searchbar({ onSubmit }) {\n  const [value, setValue] = useState('');\n\n  const handleOnChange = event => {\n    setValue(event.target.value.trim());\n  };\n\n  const handleSubmit = event => {\n    event.preventDefault();\n\n    if (value === '') {\n      toast.error('Введите строку запроса.', {\n        position: 'top-right',\n        autoClose: 3000,\n        hideProgressBar: false,\n        closeOnClick: true,\n        pauseOnHover: true,\n        draggable: true,\n        progress: undefined,\n      });\n      return;\n    }\n\n    onSubmit(value);\n    setValue('');\n  };\n\n  return (\n    <header className={s.Searchbar}>\n      <form className={s.SearchForm} onSubmit={handleSubmit}>\n        <button type=\"submit\" className={s.SearchForm_button}>\n          <span className={s.SearchForm_button_label}>Search</span>\n        </button>\n\n        <input\n          className={s.SearchForm_input}\n          type=\"text\"\n          autoComplete=\"off\"\n          autoFocus\n          placeholder=\"Search images and photos\"\n          onChange={handleOnChange}\n          value={value}\n        />\n      </form>\n    </header>\n  );\n}\n\nSearchbar.propTypes = {\n  onSubmit: PropTypes.func.isRequired,\n};\n\nexport default Searchbar;\n","import PropTypes from 'prop-types';\n\nimport s from './ImageGalleryItem.module.css';\n\nfunction ImageGalleryItem({ images, onClickImage }) {\n  return (\n    <>\n      {images.map(el => {\n        return (\n          <li className={s.ImageGalleryItem} key={el.id}>\n            <img\n              src={el.webformatURL}\n              alt={el.tags}\n              className={s.ImageGalleryItem_image}\n              data-big_img={el.largeImageURL}\n              onClick={onClickImage}\n            />\n          </li>\n        );\n      })}\n    </>\n  );\n}\n\nImageGalleryItem.propTypes = {\n  images: PropTypes.array.isRequired,\n  onClickImage: PropTypes.func.isRequired,\n};\n\nexport default ImageGalleryItem;\n","import { useEffect } from 'react';\nimport { createPortal } from 'react-dom';\nimport PropTypes from 'prop-types';\n\nimport s from './Modal.module.css';\n\nconst modalRoot = document.querySelector('#modal-root');\n\nexport default function Modal({ onClose, children }) {\n  useEffect(() => {\n    const handleKeyDown = e => {\n      if (e.code === 'Escape') {\n        onClose();\n      }\n    };\n\n    window.addEventListener('keydown', handleKeyDown);\n\n    return () => {\n      window.removeEventListener('keydown', handleKeyDown);\n    };\n  }, [onClose]);\n\n  const handleBackDropClick = e => {\n    if (e.target === e.currentTarget) {\n      onClose();\n    }\n  };\n\n  return createPortal(\n    <div className={s.Overlay} onClick={handleBackDropClick}>\n      <div className={s.Modal}>{children}</div>\n    </div>,\n    modalRoot,\n  );\n}\n\nModal.propTypes = {\n  onClose: PropTypes.func.isRequired,\n};\n","import s from './Button.module.css';\n\nexport default function Button({ onClick }) {\n  return (\n    <div className={s.container}>\n      <button type=\"button\" className={s.Button} onClick={onClick}>\n        Load more\n      </button>\n    </div>\n  );\n}\n","import PropagateLoader from 'react-spinners/PropagateLoader';\n\nimport s from './Loader.module.css';\n\nexport default function Loader() {\n  return (\n    <div className={s.container}>\n      <PropagateLoader color=\"#3f51b5\" />\n    </div>\n  );\n}\n","import { useState } from 'react';\nimport PropTypes from 'prop-types';\n\nimport ImageGalleryItem from '../ImageGalleryItem';\nimport Modal from '../Modal/';\nimport Button from '../Button/';\nimport Loader from '../Loader/';\n\nimport STATUS from '../../Service/apiStatus';\n\nimport s from './ImageGallery.module.css';\n\nconst bigImage = { alt: '', src: '' };\n\nfunction ImageGallery({ images, status, onClick, error }) {\n  const [showModal, setShowModal] = useState(false);\n\n  const toggleModal = () => {\n    setShowModal(prevShowModal => !prevShowModal);\n  };\n\n  const onClickImage = event => {\n    bigImage.alt = event.target.alt;\n    bigImage.src = event.target.dataset.big_img;\n    toggleModal();\n  };\n\n  if (status === STATUS.REJECTED) {\n    return <h1>{error.message}</h1>;\n  }\n\n  return (\n    <>\n      <ul className={s.ImageGallery}>\n        <ImageGalleryItem images={images} onClickImage={onClickImage} />\n      </ul>\n\n      {status === STATUS.RESOLVED && <Button onClick={onClick} />}\n\n      {status === STATUS.PENDING && <Loader />}\n\n      {showModal && (\n        <Modal onClose={toggleModal}>\n          <img src={bigImage.src} alt={bigImage.alt} />\n        </Modal>\n      )}\n    </>\n  );\n}\n\nImageGallery.propTypes = {\n  images: PropTypes.array.isRequired,\n  status: PropTypes.string.isRequired,\n  onClick: PropTypes.func.isRequired,\n};\n\nexport default ImageGallery;\n","import { useState, useEffect } from 'react';\nimport { ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\n\nimport fetchPhoto from './Service/apiService';\nimport STATUS from './Service/apiStatus';\n\nimport './App.css';\nimport Searchbar from './Components/Searchbar';\nimport ImageGallery from './Components/ImageGallery';\n\nfunction App() {\n  const [error, setError] = useState(null);\n  const [status, setStatus] = useState('');\n  const [page, setPage] = useState(0);\n  const [queryString, setQueryString] = useState('');\n  const [images, setImages] = useState([]);\n\n  useEffect(() => {\n    const getPhoto = (nextQueryString, nextPage) => {\n      fetchPhoto(nextQueryString, nextPage)\n        .then(data => {\n          const arrayImages = [];\n          if (data.hits.length === 0) {\n            return Promise.reject(new Error(`Данных для отображения нет`));\n          }\n\n          data.hits.forEach(element => {\n            const { id, webformatURL, largeImageURL, tags } = element;\n            arrayImages.push({ id, webformatURL, largeImageURL, tags });\n          });\n          return arrayImages;\n        })\n        .then(arrayImages => {\n          setImages(prevImages => [...prevImages, ...arrayImages]);\n          setStatus(STATUS.RESOLVED);\n\n          window.scrollTo({\n            top: document.documentElement.scrollHeight,\n            behavior: 'smooth',\n          });\n        })\n        .catch(error => {\n          setError(error);\n          setStatus(STATUS.REJECTED);\n        });\n    };\n\n    if (!queryString || !page) {\n      return;\n    }\n    setStatus(STATUS.PENDING);\n    getPhoto(queryString, page);\n  }, [queryString, page]);\n\n  const onSubmit = values => {\n    setImages([]);\n    setPage(1);\n    setQueryString(values);\n  };\n\n  const onClickButtomLoadMore = () => {\n    setPage(prevPage => prevPage + 1);\n  };\n\n  return (\n    <div className=\"App\">\n      <Searchbar onSubmit={onSubmit} />\n      <ImageGallery\n        status={status}\n        error={error}\n        onClick={onClickButtomLoadMore}\n        images={images}\n      />\n      <ToastContainer />\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}