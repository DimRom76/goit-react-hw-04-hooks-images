{"version":3,"sources":["Components/Searchbar/Searchbar.module.css","Components/ImageGalleryItem/ImageGalleryItem.module.css","Components/Modal/Modal.module.css","Components/Button/Button.module.css","Components/Loader/Loader.module.css","Components/ImageGallery/ImageGallery.module.css","Components/Searchbar/Searchbar.js","Service/apiService.js","Components/ImageGalleryItem/ImageGalleryItem.js","Components/Modal/Modal.js","Components/Button/Button.js","Components/Loader/Loader.js","Components/ImageGallery/ImageGallery.js","App.js","index.js"],"names":["module","exports","Searchbar","state","value","handleOnChange","bind","handleSubmit","event","this","setState","target","preventDefault","trim","props","onSubmit","console","log","className","s","SearchForm","type","SearchForm_button","SearchForm_button_label","SearchForm_input","autoComplete","autoFocus","placeholder","onChange","Component","fetchPhoto","queryString","numberPage","str","encodeURIComponent","url","fetch","then","response","ok","json","Promise","reject","Error","ImageGalleryItem","images","onClickImage","map","el","src","webformatURL","alt","tags","ImageGalleryItem_image","data-big_img","largeImageURL","onClick","id","modalRoot","document","querySelector","Modal","handleKeyDown","e","code","onClose","handleBackDropClick","currentTarget","window","addEventListener","removeEventListener","createPortal","Overlay","children","Button","container","Loader","color","Status","bigImage","ImageGallery","toggleModal","showModal","dataset","big_img","status","error","prevProps","prevState","prevQueryString","nextQueryString","prevPage","page","nextPage","getPhoto","data","arrayImages","hits","length","forEach","element","push","newArrayImage","scrollTo","top","documentElement","scrollHeight","behavior","catch","REJECTED","message","RESOLVED","PENDING","App","values","onClickButtomLoadMore","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.b256824f.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__2AV7s\",\"SearchForm\":\"Searchbar_SearchForm___ia8g\",\"SearchForm_button\":\"Searchbar_SearchForm_button__1SA4i\",\"SearchForm_button_label\":\"Searchbar_SearchForm_button_label__2xlRk\",\"SearchForm_input\":\"Searchbar_SearchForm_input__1ss_h\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem\":\"ImageGalleryItem_ImageGalleryItem__3xV4O\",\"ImageGalleryItem_image\":\"ImageGalleryItem_ImageGalleryItem_image__buy16\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__1GIgH\",\"Modal\":\"Modal_Modal__3ZlTf\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__c93mN\",\"container\":\"Button_container__2xy75\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Loader_container__Ty8VQ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__2vLvO\"};","import { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport s from './Searchbar.module.css';\n\nclass Searchbar extends Component {\n  constructor() {\n    super();\n    this.state = { value: '' };\n\n    this.handleOnChange = this.handleOnChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  handleOnChange(event) {\n    this.setState({ value: event.target.value });\n  }\n\n  handleSubmit(event) {\n    event.preventDefault();\n\n    if (this.state.value.trim() === '') {\n      //toast.error('Введите строку запроса.');\n      console.log('Введите строку запроса.');\n      return;\n    }\n\n    this.props.onSubmit(this.state.value);\n    this.setState({ value: '' });\n  }\n\n  render() {\n    const { value } = this.state;\n\n    return (\n      <header className={s.Searchbar}>\n        <form className={s.SearchForm} onSubmit={this.handleSubmit}>\n          <button type=\"submit\" className={s.SearchForm_button}>\n            <span className={s.SearchForm_button_label}>Search</span>\n          </button>\n\n          <input\n            className={s.SearchForm_input}\n            type=\"text\"\n            autoComplete=\"off\"\n            autoFocus\n            placeholder=\"Search images and photos\"\n            onChange={this.handleOnChange}\n            value={value}\n          />\n        </form>\n      </header>\n    );\n  }\n}\n\nSearchbar.propTypes = {\n  onSubmit: PropTypes.func.isRequired,\n};\n\nexport default Searchbar;\n","const KEY_API = '19471965-37c13a0c7cc27691c95ac1581';\nconst NumberOfPhotos = 12;\nconst orientation = 'horizontal';\n\nfunction fetchPhoto(queryString, numberPage) {\n  const str = encodeURIComponent(queryString);\n  let url = `https://pixabay.com/api/?key=${KEY_API}&q=${str}&image_type=photo&page=${numberPage}&per_page=${NumberOfPhotos}&orientation=${orientation}`;\n\n  return fetch(url).then(response => {\n    if (response.ok) {\n      return response.json();\n    }\n\n    return Promise.reject(new Error(`Ошибка получения данных`));\n  });\n}\n\nexport default fetchPhoto;\n","import PropTypes from 'prop-types';\nimport { Component } from 'react';\n\nimport s from './ImageGalleryItem.module.css';\n\nclass ImageGalleryItem extends Component {\n  render() {\n    /* id, webformatURL, largeImageURL, tags */\n    const { images, onClickImage } = this.props;\n    return (\n      <>\n        {images.map(el => {\n          return (\n            <li className={s.ImageGalleryItem} key={el.id}>\n              <img\n                src={el.webformatURL}\n                alt={el.tags}\n                className={s.ImageGalleryItem_image}\n                data-big_img={el.largeImageURL}\n                onClick={onClickImage}\n              />\n            </li>\n          );\n        })}\n      </>\n    );\n  }\n}\n\nImageGalleryItem.propTypes = {\n  images: PropTypes.array.isRequired,\n  onClickImage: PropTypes.func.isRequired,\n};\n\nexport default ImageGalleryItem;\n","import { Component } from 'react';\nimport { createPortal } from 'react-dom';\nimport PropTypes from 'prop-types';\n\nimport s from './Modal.module.css';\n\nconst modalRoot = document.querySelector('#modal-root');\n\nexport default class Modal extends Component {\n  componentDidMount() {\n    window.addEventListener('keydown', this.handleKeyDown);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.handleKeyDown);\n  }\n\n  handleKeyDown = e => {\n    if (e.code === 'Escape') {\n      this.props.onClose();\n    }\n  };\n\n  handleBackDropClick = e => {\n    if (e.target === e.currentTarget) {\n      this.props.onClose();\n    }\n  };\n\n  render() {\n    return createPortal(\n      <div className={s.Overlay} onClick={this.handleBackDropClick}>\n        <div className={s.Modal}>{this.props.children}</div>\n      </div>,\n      modalRoot,\n    );\n  }\n}\n\nModal.propTypes = {\n  onClose: PropTypes.func.isRequired,\n};\n","import s from './Button.module.css';\n\nexport default function Button({ onClick }) {\n  return (\n    <div className={s.container}>\n      <button type=\"button\" className={s.Button} onClick={onClick}>\n        Load more\n      </button>\n    </div>\n  );\n}\n","import PropagateLoader from 'react-spinners/PropagateLoader';\n\nimport s from './Loader.module.css';\n\nexport default function Loader() {\n  return (\n    <div className={s.container}>\n      <PropagateLoader color=\"#3f51b5\" />\n    </div>\n  );\n}\n","import { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nimport fetchPhoto from '../../Service/apiService';\nimport ImageGalleryItem from '../ImageGalleryItem';\nimport Modal from '../Modal/Modal';\nimport Button from '../Button/';\nimport Loader from '../Loader/';\n\nimport s from './ImageGallery.module.css';\n\nconst Status = {\n  PENDING: 'pending',\n  RESOLVED: 'resolved',\n  REJECTED: 'rejected',\n};\nconst bigImage = { alt: '', src: '' };\n\nclass ImageGallery extends Component {\n  constructor() {\n    super();\n    this.state = { images: [], status: '', error: null, showModal: false };\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    const prevQueryString = prevProps.queryString;\n    const nextQueryString = this.props.queryString;\n\n    const prevPage = prevProps.page;\n    const nextPage = this.props.page;\n\n    if (prevQueryString !== nextQueryString || prevPage !== nextPage) {\n      this.setState({ status: Status.PENDING });\n\n      this.getPhoto(prevQueryString, nextQueryString, nextPage);\n    }\n  }\n\n  getPhoto(prevQueryString, nextQueryString, nextPage) {\n    fetchPhoto(nextQueryString, nextPage)\n      .then(data => {\n        const arrayImages = [];\n        if (data.hits.length === 0) {\n          return Promise.reject(new Error(`Данных для отображения нет`));\n        }\n\n        data.hits.forEach(element => {\n          const { id, webformatURL, largeImageURL, tags } = element;\n          arrayImages.push({ id, webformatURL, largeImageURL, tags });\n        });\n        return arrayImages;\n      })\n      .then(arrayImages => {\n        let newArrayImage;\n        if (prevQueryString === nextQueryString) {\n          newArrayImage = [...this.state.images, ...arrayImages];\n        } else {\n          newArrayImage = [...arrayImages];\n        }\n\n        this.setState({ images: newArrayImage, status: Status.RESOLVED });\n\n        window.scrollTo({\n          top: document.documentElement.scrollHeight,\n          behavior: 'smooth',\n        });\n      })\n      .catch(error => this.setState({ error, status: Status.REJECTED }));\n  }\n\n  toggleModal = () => {\n    this.setState(({ showModal }) => ({ showModal: !showModal }));\n  };\n\n  onClickImage = event => {\n    bigImage.alt = event.target.alt;\n    bigImage.src = event.target.dataset.big_img;\n    this.toggleModal();\n  };\n\n  render() {\n    const { images, status, error, showModal } = this.state;\n\n    if (status === status.REJECTED) {\n      return <h1>{error.message}</h1>;\n    }\n\n    return (\n      <>\n        <ul className={s.ImageGallery}>\n          <ImageGalleryItem images={images} onClickImage={this.onClickImage} />\n        </ul>\n\n        {status === status.RESOLVED && <Button onClick={this.props.onClick} />}\n\n        {status === status.PENDING && <Loader />}\n\n        {showModal && (\n          <Modal onClose={this.toggleModal}>\n            <img src={bigImage.src} alt={bigImage.alt} />\n          </Modal>\n        )}\n      </>\n    );\n  }\n}\n\nImageGallery.propTypes = {\n  queryString: PropTypes.string.isRequired,\n  page: PropTypes.number.isRequired,\n  onClick: PropTypes.func.isRequired,\n};\n\nexport default ImageGallery;\n","import { Component } from 'react';\n\nimport './App.css';\nimport Searchbar from './Components/Searchbar';\nimport ImageGallery from './Components/ImageGallery';\n\nclass App extends Component {\n  constructor() {\n    super();\n    this.state = { page: 0, queryString: '' };\n  }\n\n  onSubmit = values => {\n    this.setState({ page: 1, queryString: values });\n  };\n\n  onClickButtomLoadMore = event => {\n    this.setState(prevState => ({ page: prevState.page + 1 }));\n  };\n\n  render() {\n    const { queryString, page } = this.state;\n\n    return (\n      <div className=\"App\">\n        <Searchbar onSubmit={this.onSubmit} />\n        <ImageGallery\n          queryString={queryString}\n          page={page}\n          onClick={this.onClickButtomLoadMore}\n        />\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}